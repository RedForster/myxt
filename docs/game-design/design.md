# **免疫塔防：游戏设计文档 (GDD)**

## **1\. 游戏概述**

### **1.1. 游戏概念**

《免疫塔防》是一款以人体免疫系统为主题的2D塔防游戏。玩家将扮演免疫系统的指挥官，通过部署不同功能的免疫细胞（防御塔），抵御不断入侵的病原体（敌人），并保护核心的免疫器官和玩家自身的健康值。

### **1.2. 游戏目标**

玩家的核心目标是在限定时间内（120秒），通过合理布局防御单元和管理资源，防止玩家健康值归零，并最终赢得胜利。

### **1.3. 目标平台**

Web (HTML5)，屏幕分辨率：1920\*1080，横屏。

## **2\. 核心玩法**

### **2.1. 游戏循环**

游戏的核心循环由以下几个部分构成：

1. **资源获取**: 免疫器官会随时间自动产生资源。  
2. **单位部署**: 玩家消耗资源，从右侧控制面板选择已解锁的免疫细胞，并将其部署在战场的有效位置。  
3. **自动战斗**: 部署的免疫细胞会自动攻击进入其射程的敌人；敌人也会主动攻击离自己最近的防御单位。当敌人突破所有防线进入玩家区域后，会对玩家健康值造成直接伤害。  
4. **单位升级**: 玩家可以消耗资源升级核心的免疫器官，以增强其生命值和资源产出。  
5. **技能使用**: 玩家可以使用特殊技能（如“喷嚏”）来应对紧急情况。  
6. **达成目标**: 在关卡倒计时结束前，保证玩家健康值存活即可获得胜利。

### **2.2. 胜利与失败条件**

* **胜利条件**: 成功防守120秒，且**玩家健康值**大于0。  
* **失败条件**: **玩家健康值**降至0或以下。

## **3\. 游戏系统与机制**

### **3.1. 玩家健康值系统**

* **核心概念**: 玩家健康值是代表玩家防线整体状态的核心数值，独立于任何战场单位。  
* **初始值**: 每个关卡可以配置不同的初始健康值。第一关Demo为 **500**。  
* **受到伤害**: 当任何敌人单位移动到战场最右侧的“玩家区域”（免疫器官右侧至控制面板边界的区域）时，该敌人会消失并对玩家健康值造成伤害。

### **3.2. 资源系统**

* **资源生成**: 核心免疫器官是主要的资源来源。  
* **生成速率**: 5 \+ 2 \* (器官等级 \- 1\) / 秒。  
* **资源消耗**:  
  * 部署不同类型的防御塔。  
  * 升级免疫器官。

### **3.3. 仇恨与吸引系统 (AI核心)**

为了使战场更加动态，游戏引入了“槽位”机制来管理单位间的仇恨。

* **防御单元吸引敌人**:  
  * 每个防御单元（包括免疫器官）都有一个**吸引槽位 (attractionSlots)**，代表它能同时被多少个敌人作为首要攻击目标。  
  * 敌人会优先攻击离自己最近且吸引槽位未满的防御单元。  
* **敌人被火力吸引**:  
  * 每个敌人也有一个**被锁定槽位 (targetedBySlots)**，代表它能同时被多少个防御塔锁定攻击。  
  * 防御塔在索敌时，会忽略那些被锁定槽位已满的敌人。

这个机制确保了火力的相对分散，避免了所有单位集火单一目标的极端情况。

### **3.4. 技能系统**

* **喷嚏 (Sneeze)**:  
  * **效果**: 对屏幕上所有敌人造成20点伤害。  
  * **冷却时间**: 20秒。

### **3.5. 升级系统**

* **可升级单位**: 仅**免疫器官**。  
* **升级消耗**: 每次升级固定消耗40资源。  
* **升级效果**:  
  * 提升生命值上限。  
  * 提升资源生成速度。  
  * 升级后生命值会完全恢复。

## **4\. 单位数值详情**

### **4.1. 防御单位 (部署单元)**

攻击范围值1的定义：144px。（屏幕1440px除10）

| 单位名称 | 消耗资源 | 生命值 | 攻击力 | 攻击范围 | 攻击速率 | 吸引槽位 |
| :---- | :---- | :---- | :---- | :---- | :---- | :---- |
| **嗜中性白血球** | 15 | 30 | 15 | 0.8 | 0.8秒/次 | 3 |
| **B细胞** | 20 | 50 | 30 | 5 | 0.6秒/次 | 3 |
| **T细胞** | 40 | 80 | 20 | 6 | 0.3秒/次 | 3 |
| **巨噬细胞** | 50 | 150 | 80 | 7 | 1.0秒/次 | 3 |

### **4.2. 敌方单位**

移动速度值1的定义：144px每秒，10秒能够达到作战区域的右侧极限（1440px）位置  
攻击范围值1的定义：144px。（屏幕1440px除10）

| 单位名称 | 生命值 | 移动速度 | 攻击力 | 攻击范围 | 攻击速率 | 击杀奖励 | 对玩家伤害 | 被锁定槽位 |
| :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- |
| **普通病菌** | 60 | 80 | 15 | 50 | 1.0秒/次 | 5资源 | 15 | 3 |

### **4.3. 固定单位**

| 单位名称 | 初始等级 | 最大等级 | 升级消耗 | 生命值公式 | 资源生成公式 | 吸引槽位 |
| :---- | :---- | :---- | :---- | :---- | :---- | :---- |
| **免疫器官** | 1 | 5 | 40资源 | 50 \+ 25 \* (等级 \- 1\) | 5 \+ 2 \* (等级 \- 1\) / 秒 | 5 |

## **5\. 关卡设计 (第一关 Demo)**

### **5.1. 初始状态**

* **初始玩家健康值**: 500  
* **初始资源**: 40  
* **初始敌人**: 游戏开始时立即生成5个**普通病菌**。

### **5.2. 敌人波次**

| 阶段 | 时间段 (秒) | 敌人类型 | 生成间隔 |
| :---- | :---- | :---- | :---- |
| **1** | 0 \- 60 | 普通病菌 | 1.0秒/个 |
| **2** | 60 \- 120 | 普通病菌 | 0.7秒/个 |

### **5.3. 防御单元解锁时间表**

| 解锁时间 (秒) | 解锁单位 |
| :---- | :---- |
| 0 | 嗜中性白血球 |
| 30 | B细胞 |
| 50 | T细胞 |
| 70 | 巨噬细胞 |
|  |  |
|  |  |

## **6\. 用户界面 (UI)**

* **游戏区域 (左侧 3/4)**: 玩家部署单元和敌人移动的主要区域。**免疫器官**位于此区域的右侧1/3处。  
* **玩家区域**: 免疫器官右侧至控制面板分界线的区域。  
* **控制面板 (右侧 1/4)**:  
  * **顶部**: 显示当前资源数量。  
  * **中部**: 升级免疫器官的按钮。  
  * **网格区**: 显示并选择已解锁的防御单元。  
  * **底部**: “喷嚏”技能按钮。  
* **状态显示**:  
  * **左上角**: 退出和暂停/恢复按钮。  
  * **左下角**: **玩家健康值**的生命条和关卡进度条。  
  * **免疫器官**: 单位上方会显示其独立的生命条。  
* **引导系统**:  
  * **底部中间(进度条的右侧)**: NPC角色和对话气泡，用于在游戏初期提供操作指引。