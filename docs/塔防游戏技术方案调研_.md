

# **技术实现蓝图：一个基于Web的2D免疫系统塔防游戏**

---

## **I. 基础架构：技术栈选型**

本章节旨在为项目奠定坚实的技术基石。此处的决策将直接影响从编码范式到部署策略的整个开发工作流。我们将对主流的游戏引擎、编程语言及构建工具进行深度分析，并最终给出一个明确且论证充分的推荐方案。

### **A. 核心引擎：Web游戏开发工具的比较分析**

选择正确的游戏引擎是项目启动阶段最关键的决策。它决定了开发团队可用的工具集、抽象层次以及社区支持的广度。

#### **1\. Phaser 3：集成式游戏框架**

* **描述：** Phaser是一个功能全面、“开箱即用”的框架，专为2D HTML5游戏开发而设计。它提供了一个完整的生态系统，原生集成了渲染（支持WebGL和Canvas回退）、物理引擎、场景管理、输入处理、资源加载和音频播放等核心功能 1。  
* **分析：** 对于塔防（TD）游戏而言，Phaser的内置功能能够显著加速开发进程。其 PathFollower 对象专为敌人沿路径移动的场景设计 3；其  
  Group 系统简化了对大量敌人和射弹的管理 4；其  
  Scene Manager 则是将游戏逻辑与UI界面分离的理想工具 5。庞大而活跃的社区以及海量的教程资源 1 极大地降低了开发过程中的阻力和技术风险。

#### **2\. PixiJS：高性能渲染引擎**

* **描述：** PixiJS并非一个游戏框架，而是一个高度优化的2D渲染库。其唯一目标是利用WebGL和WebGPU以最高性能将图形绘制到屏幕上 8。  
* **分析：** 尽管Phaser的底层渲染正是由PixiJS驱动的 10，但直接选择PixiJS意味着开发团队需要自行实现游戏循环、场景管理、物理、碰撞检测以及资源管理管线 9。这种选择提供了极致的灵活性，但代价是高昂的开发时间和复杂性。通常，只有在开发高度定制化的应用或团队已拥有成熟的自研游戏引擎架构时，才会考虑此方案。对于一个标准的TD游戏项目，这无异于重新发明轮子，效率低下。

#### **3\. 替代及基础技术选项**

* **Kaboom.js：** 这是一个轻量级、面向初学者的库，设计宗旨是简化和快速原型开发 13。它采用了一种函数式、基于组件的编程范式 16。虽然它非常适合游戏잼（Game Jam）或结构简单的项目，但对于一个需要长期迭代和扩展的复杂TD游戏而言，它可能缺乏Phaser所具备的架构深度和丰富的插件生态系统 18。  
* **原生HTML5 Canvas：** 这是最底层的实现方式，直接在浏览器中提供一个2D绘图上下文 20。这种方法要求开发者从零开始构建一切：游戏循环（  
  requestAnimationFrame）、状态管理、场景图、输入处理以及所有的物理和碰撞逻辑 22。此路径能提供最深刻的学习体验，但从生产效率角度看是最低效的选择。

#### **4\. 架构推荐与论证**

* **推荐方案：** **Phaser 3** 是本项目无可争议的最佳选择。  
* **论证：** Phaser 3在高层抽象（加速开发）和底层控制之间取得了最佳平衡。其功能集与塔防游戏的需求高度契合，最大程度地减少了从零构建核心系统的工作量。其强大的社区和大量现成的TD开源示例 4 为项目提供了安全网和丰富的成熟模式参考。

引擎的选择不仅是技术层面的权衡，更是一种开发哲学的抉择。表面上看，这是在不同功能集的工具之间做选择 10。然而，深入一层，选择框架（Phaser）还是库（PixiJS）反映了根本的开发理念。选择Phaser意味着接受其“带意见的”（opinionated）结构 29，利用其预置的解决方案来专注于游戏本身的特定逻辑。这种哲学优先考虑的是开发速度和对既定模式的遵循。相反，选择PixiJS则意味着从头构建一套自定义架构，这优先考虑了灵活性和控制力，但引入了巨大的架构开销和风险。对于一个像塔防这样类型明确的项目，采纳框架的开发哲学远比基于渲染库构建一个定制引擎更为高效和稳妥。

### **B. 语言与构建工具：确保可扩展性与效率**

#### **1\. TypeScript：首选编程语言**

* **描述：** TypeScript是JavaScript的一个超集，它为语言添加了静态类型系统。  
* **分析：** 在一个包含大量交互实体（塔、敌人、射弹）和复杂状态的游戏中，TypeScript的作用至关重要。它能有效防止常见的运行时错误（例如，将字符串作为伤害值传递给需要数字的函数），提供卓越的IDE自动完成和重构支持，并使代码库更具自文档性，从而更易于团队协作和长期维护 26。在现代高质量的开源项目中，TypeScript的普及也印证了它作为行业最佳实践的地位 26。

#### **2\. Vite：现代化构建工具**

* **描述：** Vite是一个下一代前端构建工具，它通过原生ES模块提供极速的开发服务器，并使用Rollup进行预配置的、高度优化的生产构建。  
* **分析：** Vite近乎即时的热模块替换（HMR）特性对于游戏开发是一项革命性的改进。它允许开发者实时调整游戏逻辑、对象位置和各种参数，而无需重新加载整个页面，从而极大地缩短了迭代周期。Phaser 3官方提供的Vite模板（phaserjs/template-vite 35）为项目提供了一个生产就绪的起点。

Web游戏开发领域的演进趋势表明，它正在与专业的Web应用开发标准趋同。早期的或简单的游戏项目通常使用原生JavaScript和基础的HTML文件 36。然而，近期涌现的、结构更复杂的开源示例无一例外地采用了TypeScript和Vite等现代构建工具 16。这并非巧合，而是Web游戏日益复杂的直接反映。当游戏状态变得错综复杂时，TypeScript提供的类型安全和可扩展性就从“锦上添花”变成了“不可或缺”。当迭代速度成为竞争优势时，Vite这类工具的性能就变得至关重要。这标志着现代Web游戏开发不再是一个孤立的、小众的领域，它正在走向成熟，并采纳那些在更广泛的专业软件工程领域中被证明行之有效的最佳实践，如静态类型、模块化架构、高效构建管线和自动化测试。本技术方案必须体现这种成熟度。

### **C. 技术栈选型总结表**

为了让所有项目相关方和团队成员能快速把握关键的技术权衡及最终选型的理由，下表将前述的详细分析提炼为一个清晰的对比格式。

| 特性 | Phaser 3 | PixiJS | Kaboom.js | 原生 Canvas |
| :---- | :---- | :---- | :---- | :---- |
| **类型** | 游戏框架 | 渲染库 | 轻量级游戏库 | 浏览器绘图API |
| **核心优势** | 一体化的游戏系统 | 极致的渲染性能 | 简洁，快速原型 | 最高的自由度和学习价值 |
| **内置功能** | 物理, 场景管理, 音频, 输入, 资源加载 | 仅渲染与基础交互 | 基础游戏组件 | 无，需自行实现 |
| **开发速度** | 高 | 低 | 中-高 | 极低 |
| **学习曲线** | 中等 | 高 | 低 | 极高 |
| **最佳适用场景** | 功能丰富的2D游戏 | 定制化视觉应用 | 初学者/游戏잼 | 学习底层原理 |

---

## **II. 案例研究：借鉴开源实现**

本章节将解构现有的开源项目，从中提取经过验证的架构模式和实用的实现细节。我们将以这些项目为蓝本或警示，来指导我们自己的设计。

### **A. 案例研究 1: maciej-trebacz/tower-of-time-game (Phaser \+ TypeScript \+ Vite)**

* **项目概述：** 这是一个完成度极高的塔防游戏，堪称现代Phaser项目的典范。它实现了时间回溯机制、多种塔类型和能量系统等复杂功能 26。  
* 架构分析 26：  
  * **项目结构：** 源代码被逻辑清晰地组织在不同目录中：scenes/（场景）、prefabs/（实体预制件）、systems/（核心逻辑，如能量系统）、components/（组件）和 ui/。这种模块化的结构是保证项目可扩展性和团队协作的最佳实践，我们将采纳类似的结构。  
  * **实体管理：** 使用 prefabs/ 目录来定义游戏实体（塔、敌人）的类，是一种清晰、可复用的模式，值得我们复制。  
  * **工具链：** 该项目验证了我们在第一部分所推荐的技术栈：Phaser 3、TypeScript和Vite。  
  * **AI辅助开发：** 作者提到约95%的代码是在AI辅助下完成的 26。这为我们揭示了现代开发工作流的一种可能性，但同时也带来一个警示：AI可能生成冗长的代码，从原型到产品的转化过程中，人的监督对于保证代码质量至关重要。

### **B. 案例研究 2: CorentinTh/inert (无依赖TypeScript)**

* **项目概述：** 这是一个极简的塔防游戏，完全使用TypeScript编写，不依赖任何外部游戏引擎或库 33。  
* 架构分析 33：  
  * **作为反例的价值：** 尽管代码实现细节并未在资料中提供，但这个项目的*存在本身*就是关键的启示。它实际展示了从零开始构建核心系统所需付出的巨大努力：自定义的游戏循环、渲染管线（很可能直接绘制到Canvas上）、寻路算法、碰撞检测逻辑和状态管理。  
  * **结论：** 通过研究这个项目（即使只是宏观层面），Phaser这类框架的价值主张变得不言而喻。它抽象了成千上万行基础代码，让开发者能专注于游戏独特玩法的实现。

### **C. 案例研究 3: SerhiiChoGames/tower-defense (Phaser \+ JavaScript \+ Vite)**

* **项目概述：** 这是一个使用Phaser和Vite构建的、简单明了的开源塔防游戏 25。  
* **架构分析：** 该项目可作为一个更简单、更易于上手的参考。对于理解Phaser的基础概念，如设置场景、使用npm install安装依赖、以及通过npm run dev运行开发服务器等，它是一个很好的起点，且没有TypeScript带来的额外复杂性。它再次强化了Phaser/Vite组合的可行性。

### **D. 最佳实践综合**

* **模块化项目结构：** 采纳 tower-of-time-game 的目录结构：src/scenes、src/entities、src/systems、src/ui。  
* **基于类的实体：** 将所有游戏对象（塔、敌人、射弹）定义为TypeScript类，以实现清晰、可复用和可扩展的代码。  
* **场景分离：** 严格区分主游戏逻辑（GameScene）和用户界面（UIScene），以提高代码组织性和性能。  
* **配置驱动设计：** 使用配置文件（如JSON或TS对象）来管理游戏设置（如敌人属性、塔的造价），使得平衡性调整无需修改核心逻辑代码。

尽管上述案例没有明确使用实体-组件-系统（Entity-Component-System, ECS）模式，但对于更复杂的项目而言，ECS是符合逻辑的演进方向。tower-of-time-game 的 prefabs/（实体）和 systems/（逻辑）结构 26 已经体现了数据（实体）与行为（系统）分离的趋势。在其他平台（如Roblox）上，专业游戏工作室（如Paradoxum Games）也大量使用ECS框架（如

jecs）来管理复杂性 40。随着塔防游戏加入更多状态效果（如减速、中毒）、不同护甲类型和多样的塔技能，传统的继承模型（如

class SlowingTower extends Tower）会变得僵硬。因此，虽然本项目范围内的基于类的设计已经足够，但本报告应简要提及ECS作为一种更高级的架构模式。该模式将实体定义为简单的ID，将数据（如 PositionComponent, HealthComponent, SlowEffectComponent）作为组件附加到实体上，而系统则负责处理拥有特定组件集的实体。这为未来超越初始实现范围的扩展提供了清晰的路线图。

同时，必须认识到，开源塔防游戏是一把双刃剑。它们提供了可参考的代码，但也可能传播过时的实践。GitHub上存在大量开源TD游戏 41，但其中许多项目年代久远，使用了废弃的库，或采用非模块化的原生JavaScript编写 36。开发者若不加甄别地使用，可能会无意中采纳不良的架构模式，从而阻碍项目的扩展和维护。因此，分析必须是批判性的。本报告的价值不仅在于找到

*一个*示例，更在于甄选和推荐现代、稳健的模式（如 tower-of-time-game 所展示的），同时警示开发者避开那些陈旧、简单示例中的陷阱。

---

## **III. 核心系统实现：基于Phaser 3与TypeScript**

本章是报告的技术核心，将使用推荐的技术栈，提供构建游戏各个系统的分步指南。

### **A. 项目脚手架与场景管理**

#### **1\. 初始化项目**

* 使用Phaser官方命令行工具来创建项目脚手架：npm create @phaserjs/game@latest 1。在交互式提示中，选择Vite和TypeScript模板。  
* 该命令会自动配置好整个开发环境，包括package.json、vite.config.js以及一个基础的文件结构 35。

#### **2\. 架构游戏场景**

* Phaser的强大之处在于其场景管理器（Scene Manager） 5。我们将构建一个多场景架构，以实现关注点分离。  
* **PreloaderScene.ts**：此场景负责加载所有游戏资源（图片、精灵图集、音频文件），并显示一个加载进度条。这可以防止游戏在资源不完整的情况下启动，提升用户体验。  
* **GameScene.ts**：这是核心游戏玩法发生的主场景。它将包含地图、敌人、防御塔以及所有相关的游戏逻辑。  
* **UIScene.ts**：此场景与GameScene并行运行，并渲染在GameScene之上 5。它将处理所有UI元素，如分数、玩家生命值、塔的建造菜单等。这种分离至关重要：UI摄像机不会随游戏世界滚动，且其逻辑与游戏逻辑解耦，便于独立管理 43。  
* **场景间通信：** 使用Phaser内置的EventEmitter在场景间进行通信。例如，当一个敌人在GameScene中被消灭时，GameScene会发出一个enemy-killed事件，并附带分数。UIScene会监听此事件，并相应地更新分数显示 42。

TypeScript

// 在 GameScene.ts 中  
this.events.emit('enemy-killed', 100);

// 在 UIScene.ts 的 create() 方法中  
const gameScene \= this.scene.get('GameScene');  
gameScene.events.on('enemy-killed', (scoreValue: number) \=\> {  
    this.score \+= scoreValue;  
    this.scoreText.setText(\`Score: ${this.score}\`);  
}, this);

### **B. 实体架构：病原体（敌人）、免疫细胞（塔）与射弹**

#### **1\. 基础实体类**

创建一个抽象的Entity基类（abstract class Entity extends Phaser.GameObjects.Sprite），它将包含所有游戏对象共有的属性和方法，例如hp（生命值）和receiveDamage(damage: number)方法。

#### **2\. 敌人（病原体）实现**

* **类定义：** class Enemy extends Entity。为了表示不同类型的病原体，可以在构造函数中传入一个配置对象，包含其速度、生命值、消灭奖励等属性。  
* **路径移动：**  
  * 在GameScene中，使用this.add.path()和path.lineTo()来定义一条路径 4。  
  * Enemy类将继承自Phaser.GameObjects.PathFollower 3，这是一个封装了沿路径移动逻辑的便捷类。或者，也可以在敌人的  
    update方法中，通过path.getPoint(t)手动更新其位置，其中t是一个0到1之间的归一化进度值 4。  
    PathFollower是更直接、封装性更好的方法。  
* **生命条：** 创建一个HealthBar类，该类使用Phaser.GameObjects.Graphics来绘制两个矩形：一个背景条和一个前景生命条。Enemy对象将持有一个HealthBar实例。在Enemy的update循环中，持续更新生命条的位置，使其始终跟随敌人移动 45。

#### **3\. 防御塔（免疫细胞）实现**

* **类定义：** class Tower extends Entity。  
* **放置：** 在GameScene中监听鼠标（指针）点击事件。检查被点击的网格瓦片是否为有效的放置位置（例如，不在敌人路径上）。如果有效，则创建一个新的Tower实例 4。  
* **索敌：** 在Tower的update方法中，遍历所有激活的敌人。使用Phaser.Math.Distance.Between()计算塔与每个敌人之间的距离。找到第一个进入塔攻击范围的敌人作为目标。  
* **旋转：** 一旦锁定目标，使用Phaser.Math.Angle.Between(tower.x, tower.y, enemy.x, enemy.y)计算塔到敌人的角度。将塔的rotation属性设置为此角度，使其朝向目标 48。  
* **开火：** 使用计时器（this.scene.time.addEvent）来控制塔的攻击速率。当计时器触发且有目标在射程内时，调用fire()方法。

#### **4\. 射弹实现**

* **类定义：** class Projectile extends Phaser.GameObjects.Image。  
* **移动：** Tower.fire()方法将创建一个Projectile实例。使用this.scene.physics.moveToObject(projectile, target, speed)使其朝目标当前位置移动。  
* **碰撞：** 在GameScene中，为射弹组和敌人组设置物理重叠检测：this.physics.add.overlap(this.projectiles, this.enemies, this.handleProjectileCollision, null, this)。  
* **伤害处理：** handleProjectileCollision回调函数会在射弹与敌人重叠时触发。在该函数内部，调用敌人的receiveDamage()方法，并销毁（或回收）射弹。

在实现这些实体时，一个至关重要的性能优化是使用Phaser内置的对象池（Groups），尤其对于射弹。一个塔防游戏在其生命周期内可能生成成千上万的射弹和敌人。频繁地创建和销毁对象（new Projectile(), projectile.destroy()）会增加内存分配的开销，并可能触发JavaScript的垃圾回收机制，导致游戏出现卡顿或“掉帧”。Phaser的Group类原生支持对象池。当调用group.get()时，它会优先复用一个池中“死亡”的对象，而不是创建一个新对象。当一个对象被“杀死”时，通过调用setActive(false).setVisible(false)，它会被取消激活并返回对象池，而不是被真正销毁 4。因此，实现中必须为射弹和敌人创建专门的

Group。当塔开火时，应调用projectiles.get()，当射弹命中或飞出屏幕时，应将其回收到池中，而非销毁。这是一个不明显但对性能至关重要的优化策略。

此外，敌人路径移动的状态管理需要与视觉表现解耦。路径在游戏中被直观地定义 4，但其核心数据是一个数学曲线（

Phaser.Curves.Path 3）。敌人的核心状态是其在该路径上的进度，通常用一个从0到1的归一化值

t来表示 4。敌人的屏幕坐标

x和y，是通过用当前的t值查询路径而得到的*结果*。因此，敌人的核心更新逻辑应该是this.follower.t \+= speed \* delta;，而视觉更新this.setPosition(...)是这个状态改变的后果。这种分离是关键，它意味着我们可以改变整个视觉路径而无需修改敌人的核心移动逻辑。这也简化了游戏状态的保存与加载，因为我们只需存储每个敌人的t值，而不是其精确的像素坐标。

---

## **IV. 质量保证与部署**

本章将详细介绍确保游戏稳健、无错且易于部署的专业实践，使项目超越简单原型的范畴。

### **A. 务实的测试策略**

#### **1\. 配置Jest与TypeScript及Phaser**

* **理由：** 尽管端到端测试在游戏中实施困难，但对核心的、非视觉的逻辑进行单元测试对于保证游戏稳定性至关重要。Jest是React和许多JavaScript项目的标准测试框架，是一个可靠的选择 49。  
* **配置步骤：**  
  * 安装依赖：jest, jest-environment-jsdom, ts-jest 50。  
  * 模拟浏览器API：Jest在Node.js环境中运行，而非浏览器。因此，必须模拟Phaser所依赖的浏览器特定功能。使用jest-canvas-mock来处理\<canvas\>元素缺失导致的错误 49。  
  * 根据需要模拟其他依赖项，如phaser3spectorjs 50。

#### **2\. 单元测试核心逻辑**

* **测试范围：** 重点测试不涉及渲染的纯逻辑部分。理想的测试对象包括：  
  * 伤害计算函数。  
  * 资源管理逻辑（例如，“购买防御塔是否正确扣除了货币？”）。  
  * 实体的状态机。  
  * 工具函数（如距离计算）。  
* **测试用例示例：** 为Tower类编写一个测试。创建一个模拟的敌人对象，并将其放置在塔的攻击范围内。调用塔的update方法。断言塔的状态是否变为isFiring。这个测试在不绘制任何像素的情况下，验证了索敌逻辑的正确性 51。

为Phaser配置测试环境的复杂性，揭示了游戏开发中一个深刻的现实：逻辑与表现层的紧密耦合。Phaser期望一个完整的浏览器环境（包括canvas、音频上下文等）49，这迫使开发者必须显式地模拟这些依赖。这个模拟的过程本身，就揭示了代码的哪些部分是纯逻辑，哪些部分与渲染引擎绑定。因此，一个稳健的测试策略要求在架构设计上有意地将游戏逻辑与Phaser的场景图解耦。例如，用于计算伤害、管理货币或决定升级成本的函数，应该是可以被独立导入和测试的纯函数。测试的难度直接反映了应用架构的耦合程度。本报告必须倡导这种解耦，以实现更高质量的软件。

### **B. 构建与Web部署**

#### **1\. 创建生产版本**

* 在项目根目录运行命令 npm run build 35。  
* Vite将执行以下操作：转译TypeScript代码，将所有JavaScript模块打包，压缩代码，并将public目录下的所有静态资源复制到一个名为dist的目录中。这个dist目录包含了部署所需的所有文件。

#### **2\. 部署到GitHub Pages**

* **理由：** GitHub Pages是一个免费、简单且高效的静态网站托管服务，非常适合分享和展示Web游戏。  
* 部署步骤 52：  
  1. 在vite.config.js文件中，设置base属性为你的GitHub仓库名称，格式为base: '/your-repo-name/'。这是确保资源能被正确加载的关键一步。  
  2. 将项目代码推送到GitHub仓库。  
  3. 在仓库的“Settings”（设置）页面，找到“Pages”部分。  
  4. 选择部署的源分支（如main）和文件夹（选择/dist）。（另一种常见做法是部署到一个专门的gh-pages分支）。  
  5. GitHub将自动构建并部署网站，并提供一个公开的URL。

Vite配置中的base选项是部署过程中最常见的失败点，理解其原理对成功部署至关重要。在本地开发时，游戏运行在http://localhost:8080/，资源路径是根相对的（例如/assets/enemy.png）。然而，当部署到GitHub Pages时，游戏地址变为https://user.github.io/repo-name/，因此资源必须从/repo-name/assets/enemy.png加载 52。

vite.config.js中的base选项的作用，就是在构建过程中，自动为所有资源URL添加/repo-name/前缀。这不仅仅是一个配置细节，它涉及到Web托管中相对路径与绝对路径的基础概念。未能理解这一点，将导致“本地正常，线上404”的典型部署陷阱。本报告必须清晰地强调这一点，以防止这种常见错误的发生。

#### **3\. 其他部署平台概览**

* 简要提及其他流行的静态托管服务，如Netlify和Vercel。它们提供类似的基于Git的部署工作流，也是非常出色的选择 52。

---

## **V. 资源管线**

本章为“免疫系统”主题提供实用的资源获取途径，旨在帮助团队在没有专职美术和音效设计师的情况下，快速进行原型开发。

### **A. 获取视觉与音频资源**

* **主题转化：**  
  * **防御塔：** 免疫细胞（如巨噬细胞、T细胞、B细胞）。  
  * **敌人：** 病原体（如细菌、病毒、真菌）。  
  * **射弹：** 抗体、化学信号。  
  * **地图：** 组织切片或血管截面。  
* **推荐的免费资源来源：**  
  * **精灵图集（角色、瓦片、特效）：**  
    * **Craftpix.net** 54：提供大量免费和付费的精灵图，包括可被改造用于本项目的怪物、角色和图标。  
    * **GameArt2D.com** 57：提供免费的角色精灵和杂项资源。  
    * **Dribbble \- 2D Game Assets** 58：一个包含免费怪物和角色精灵的合集。  
    * **Itch.io** 54：一个巨大的数字市场，其“free”标签下有海量的游戏资源。  
  * **音频（音效与音乐）：**  
    * **Zapsplat** 59：提供数千种游戏专用免费音效（胜利、失败、收集、动作等）。  
    * **Mixkit** 60：提供高质量、免版税的游戏音效。  
    * **Sonniss Game Audio GDC Bundles** 61：Sonniss每年都会在游戏开发者大会（GDC）期间发布数GB的专业级音效包，完全免费且免版税。这是一个无与伦比的宝贵资源。  
    * **ElevenLabs** 62：AI驱动的音效生成器，可通过文本提示创建高度定制化的声音。

### **B. Phaser中的资源加载与管理**

* **最佳实践：** 所有的资源加载操作都应该在PreloaderScene的preload()方法中进行。  
* **实现：**  
  * 使用this.load.image()加载静态图片。  
  * 使用this.load.spritesheet()加载动画角色的精灵图集，并指定帧的宽度和高度。  
  * 使用this.load.audio()加载音效和音乐。  
  * 在加载过程中，通过监听加载器的progress和complete事件来显示一个进度条。这为用户提供了关键的加载反馈。  
  * 一旦complete事件触发，就从PreloaderScene过渡到主菜单或GameScene：this.scene.start('GameScene');。

## **结论**

本报告提供了一套完整的、专家级的技术实现方案，用于指导一个Web 2D免疫系统塔防游戏的开发。通过对技术栈的审慎选择、对开源案例的深度剖析、对核心系统实现的详细规划以及对质量保证和部署流程的专业指导，本方案旨在构建一个现代化、可扩展且易于维护的游戏项目。

最终的技术路线图如下：

1. **核心技术栈：** 采用 **Phaser 3** 作为游戏框架，**TypeScript** 作为开发语言，并以 **Vite** 作为构建工具。这个组合提供了最佳的开发效率、代码质量和项目可维护性。  
2. **架构模式：** 遵循从tower-of-time-game等现代开源项目中提炼出的最佳实践，采用模块化的项目结构，实施严格的场景分离（游戏逻辑、UI、预加载），并以面向对象的方式构建所有游戏实体。  
3. **核心实现：** 充分利用Phaser的内置功能，如PathFollower用于敌人移动，Groups结合对象池优化性能，EventEmitter实现场景间通信，以及Graphics对象动态绘制生命条。  
4. **质量与部署：** 建立基于Jest的单元测试流程，专注于测试与渲染解耦的纯逻辑代码。采用Vite进行生产构建，并通过GitHub Pages实现简单、可靠的持续部署。

遵循此蓝图，开发团队将能够有效规避常见的技术陷阱，缩短开发周期，并最终交付一个技术上稳健、性能优良且具有专业水准的Web游戏产品。

#### **Works cited**

1. Phaser is a fun, free and fast 2D game framework for making HTML5 games for desktop and mobile web browsers, supporting Canvas and WebGL rendering. \- GitHub, accessed July 28, 2025, [https://github.com/phaserjs/phaser](https://github.com/phaserjs/phaser)  
2. Getting Started with Phaser 3, accessed July 28, 2025, [https://phaser.io/tutorials/getting-started-phaser3](https://phaser.io/tutorials/getting-started-phaser3)  
3. PathFollower \- What is Phaser?, accessed July 28, 2025, [https://docs.phaser.io/api-documentation/class/gameobjects-pathfollower](https://docs.phaser.io/api-documentation/class/gameobjects-pathfollower)  
4. How To Make A Tower Defense Game With Phaser 3 \- GameDev Academy, accessed July 28, 2025, [https://gamedevacademy.org/how-to-make-tower-defense-game-with-phaser-3/](https://gamedevacademy.org/how-to-make-tower-defense-game-with-phaser-3/)  
5. Scenes \- What is Phaser?, accessed July 28, 2025, [https://docs.phaser.io/phaser/concepts/scenes](https://docs.phaser.io/phaser/concepts/scenes)  
6. Latest News Games Tutorials Videos \- Phaser, accessed July 28, 2025, [https://phaser.io/news/category/tutorial](https://phaser.io/news/category/tutorial)  
7. Build a Tower Defense Game with Phaser 3 \[2018\] \- Zenva Academy, accessed July 28, 2025, [https://academy.zenva.com/product/build-a-tower-defense-game-with-phaser-3/](https://academy.zenva.com/product/build-a-tower-defense-game-with-phaser-3/)  
8. pixijs/pixijs: The HTML5 Creation Engine: Create beautiful digital content with the fastest, most flexible 2D WebGL renderer. \- GitHub, accessed July 28, 2025, [https://github.com/pixijs/pixijs](https://github.com/pixijs/pixijs)  
9. What PixiJS Is Not, accessed July 28, 2025, [https://pixijs.com/7.x/guides/basics/what-pixijs-is-not](https://pixijs.com/7.x/guides/basics/what-pixijs-is-not)  
10. Which is a better option for developing general HTML5 games in 2017, Pixi or Phaser?, accessed July 28, 2025, [https://www.quora.com/Which-is-a-better-option-for-developing-general-HTML5-games-in-2017-Pixi-or-Phaser](https://www.quora.com/Which-is-a-better-option-for-developing-general-HTML5-games-in-2017-Pixi-or-Phaser)  
11. Is someone use js in gamdev? Pixi or phaser or anything else? : r/gamedev \- Reddit, accessed July 28, 2025, [https://www.reddit.com/r/gamedev/comments/1imcnyn/is\_someone\_use\_js\_in\_gamdev\_pixi\_or\_phaser\_or/](https://www.reddit.com/r/gamedev/comments/1imcnyn/is_someone_use_js_in_gamdev_pixi_or_phaser_or/)  
12. PixiJs vs Phaser for my Card Game : r/gamedev \- Reddit, accessed July 28, 2025, [https://www.reddit.com/r/gamedev/comments/1ams9tg/pixijs\_vs\_phaser\_for\_my\_card\_game/](https://www.reddit.com/r/gamedev/comments/1ams9tg/pixijs_vs_phaser_for_my_card_game/)  
13. How to Use Kaboom.js to Make Video Games \- GameDesigning.org, accessed July 28, 2025, [https://www.gamedesigning.org/learn/kaboom-js/](https://www.gamedesigning.org/learn/kaboom-js/)  
14. Kaboom.js Tutorials – Complete Guide For Easy Game Dev \- GameDev Academy, accessed July 28, 2025, [https://gamedevacademy.org/kaboom-js-tutorials/](https://gamedevacademy.org/kaboom-js-tutorials/)  
15. Kaboom.js, accessed July 28, 2025, [https://kaboomjs.com/](https://kaboomjs.com/)  
16. ourcade/phaser3-vs-kaboomjs: Compare and contrast Phaser 3 and Kaboom.js to create similar game mechanics \- GitHub, accessed July 28, 2025, [https://github.com/ourcade/phaser3-vs-kaboomjs](https://github.com/ourcade/phaser3-vs-kaboomjs)  
17. Intro \- Kaboom.js, accessed July 28, 2025, [https://kaboomjs.com/doc/intro](https://kaboomjs.com/doc/intro)  
18. Is Kaboom js or Phaser js better to use as a web developer trying to delve into game development : r/gamedev \- Reddit, accessed July 28, 2025, [https://www.reddit.com/r/gamedev/comments/1fyc71b/is\_kaboom\_js\_or\_phaser\_js\_better\_to\_use\_as\_a\_web/](https://www.reddit.com/r/gamedev/comments/1fyc71b/is_kaboom_js_or_phaser_js_better_to_use_as_a_web/)  
19. Show HN: Kaboom.js is a zero-dependency declarative JavaScript game library, accessed July 28, 2025, [https://news.ycombinator.com/item?id=26728774](https://news.ycombinator.com/item?id=26728774)  
20. What are the advantages/disadvantages of Canvas vs. DOM in JavaScript game development? \[closed\] \- Stack Overflow, accessed July 28, 2025, [https://stackoverflow.com/questions/2266416/what-are-the-advantages-disadvantages-of-canvas-vs-dom-in-javascript-game-devel](https://stackoverflow.com/questions/2266416/what-are-the-advantages-disadvantages-of-canvas-vs-dom-in-javascript-game-devel)  
21. JavaScript Game Tutorial – Build a Stick Hero Clone with HTML Canvas \+ JavaScript, accessed July 28, 2025, [https://www.freecodecamp.org/news/javascript-game-tutorial-stick-hero-with-html-canvas/](https://www.freecodecamp.org/news/javascript-game-tutorial-stick-hero-with-html-canvas/)  
22. Why wouldn't one use Canvas for HTML 5 game development? \[closed\], accessed July 28, 2025, [https://gamedev.stackexchange.com/questions/53939/why-wouldnt-one-use-canvas-for-html-5-game-development](https://gamedev.stackexchange.com/questions/53939/why-wouldnt-one-use-canvas-for-html-5-game-development)  
23. How to make a simple HTML5 Canvas game \- LDG, accessed July 28, 2025, [http://www.lostdecadegames.com/how-to-make-a-simple-html5-canvas-game/](http://www.lostdecadegames.com/how-to-make-a-simple-html5-canvas-game/)  
24. The Complete Guide to Building HTML5 Games with Canvas and SVG \- SitePoint, accessed July 28, 2025, [https://www.sitepoint.com/the-complete-guide-to-building-html5-games-with-canvas-and-svg/](https://www.sitepoint.com/the-complete-guide-to-building-html5-games-with-canvas-and-svg/)  
25. SerhiiChoGames/tower-defense: Open source game ... \- GitHub, accessed July 28, 2025, [https://github.com/SerhiiChoGames/tower-defense](https://github.com/SerhiiChoGames/tower-defense)  
26. maciej-trebacz/tower-of-time-game: Vibe coded Tower ... \- GitHub, accessed July 28, 2025, [https://github.com/maciej-trebacz/tower-of-time-game](https://github.com/maciej-trebacz/tower-of-time-game)  
27. A Tower Defense game using Phaser 3.0 \- GitHub, accessed July 28, 2025, [https://github.com/AntVo/Phaser-Tower-Defense](https://github.com/AntVo/Phaser-Tower-Defense)  
28. thilo-behnke/phaser3-tower-defense: Tower defense game using the Phaser 3 game engine and the MatterJS physics engine. Written in typescript. \- GitHub, accessed July 28, 2025, [https://github.com/thilo-behnke/phaser3-tower-defense](https://github.com/thilo-behnke/phaser3-tower-defense)  
29. @pixi/core vs phaser | Game Development Libraries Comparison \- NPM Compare, accessed July 28, 2025, [https://npm-compare.com/@pixi/core,phaser](https://npm-compare.com/@pixi/core,phaser)  
30. Question: PixieJS or Phaser.io? \- HTML5 Game Devs Forum, accessed July 28, 2025, [https://www.html5gamedevs.com/topic/46899-question-pixiejs-or-phaserio/](https://www.html5gamedevs.com/topic/46899-question-pixiejs-or-phaserio/)  
31. mrChernicharo/tower-def: Tower Defense game created with THREEjs, Blender, React and Typescript. Waves of Enemies will swarm into your territory. Can you stop them? \- GitHub, accessed July 28, 2025, [https://github.com/mrChernicharo/tower-def](https://github.com/mrChernicharo/tower-def)  
32. philipp-meier/TowerDefense: :video\_game: A simple Tower Defense Game written in Typescript. \- GitHub, accessed July 28, 2025, [https://github.com/philipp-meier/TowerDefense](https://github.com/philipp-meier/TowerDefense)  
33. CorentinTh/inert: Minimalistic tower defense in the browser ... \- GitHub, accessed July 28, 2025, [https://github.com/CorentinTh/inert](https://github.com/CorentinTh/inert)  
34. pixijs/open-games \- GitHub, accessed July 28, 2025, [https://github.com/pixijs/open-games](https://github.com/pixijs/open-games)  
35. phaserjs/template-vite: A Phaser 3 project template that uses Vite for bundling \- GitHub, accessed July 28, 2025, [https://github.com/phaserjs/template-vite](https://github.com/phaserjs/template-vite)  
36. a open-source tower-defense game \- GitHub, accessed July 28, 2025, [https://github.com/ZeroTixDev/tower-defense](https://github.com/ZeroTixDev/tower-defense)  
37. selenebun/towerdefense: Simple tower defense game in p5.js \- GitHub, accessed July 28, 2025, [https://github.com/selenebun/towerdefense](https://github.com/selenebun/towerdefense)  
38. Tower Defense Game created via HTML5, JavaScript, and MelonJS \- GitHub, accessed July 28, 2025, [https://github.com/frandyjayr/Tower-Defense-Game](https://github.com/frandyjayr/Tower-Defense-Game)  
39. gamedevland/tower-defense: Tower Defense game with PixiJS \- GitHub, accessed July 28, 2025, [https://github.com/gamedevland/tower-defense](https://github.com/gamedevland/tower-defense)  
40. Paradoxum Games \- GitHub, accessed July 28, 2025, [https://github.com/paradoxum-games](https://github.com/paradoxum-games)  
41. tower-defense · GitHub Topics, accessed July 28, 2025, [https://github.com/topics/tower-defense?l=javascript\&o=asc\&s=updated\&utf8=%E2%9C%93](https://github.com/topics/tower-defense?l=javascript&o=asc&s=updated&utf8=%E2%9C%93)  
42. Examples \- v3.85.0 \- scenes \- Ui Scene \- Phaser, accessed July 28, 2025, [https://phaser.io/examples/v3.85.0/scenes/view/ui-scene](https://phaser.io/examples/v3.85.0/scenes/view/ui-scene)  
43. Phaser 3 HUD Menu \- HTML5 Game Devs Forum, accessed July 28, 2025, [https://www.html5gamedevs.com/topic/38009-phaser-3-hud-menu/](https://www.html5gamedevs.com/topic/38009-phaser-3-hud-menu/)  
44. Phaser 3 Tutorial: Inter-Scene Communication Made Easy\! \- YouTube, accessed July 28, 2025, [https://www.youtube.com/watch?v=5zl74QQjUDI](https://www.youtube.com/watch?v=5zl74QQjUDI)  
45. Examples \- v3.85.0 \- game objects \- graphics \- Health Bars Demo \- Phaser, accessed July 28, 2025, [https://phaser.io/examples/v3.85.0/game-objects/graphics/view/health-bars-demo](https://phaser.io/examples/v3.85.0/game-objects/graphics/view/health-bars-demo)  
46. How to make a health bar in Phaser 3, accessed July 28, 2025, [https://phasergames.com/how-to-make-a-health-bar-in-phaser-3/](https://phasergames.com/how-to-make-a-health-bar-in-phaser-3/)  
47. Creating a Health Bar | Attach graphic above sprite \- HTML5 Game Devs Forum, accessed July 28, 2025, [https://www.html5gamedevs.com/topic/15287-creating-a-health-bar-attach-graphic-above-sprite/](https://www.html5gamedevs.com/topic/15287-creating-a-health-bar-attach-graphic-above-sprite/)  
48. How to Make Enemy Sprite Track the Player in Phaser 3 \- Ourcade Blog, accessed July 28, 2025, [https://blog.ourcade.co/posts/2020/how-to-make-enemy-sprite-rotation-track-player-phaser-3/](https://blog.ourcade.co/posts/2020/how-to-make-enemy-sprite-rotation-track-player-phaser-3/)  
49. Setting up Jest with React and Phaser | by Taylor Nodell \- Medium, accessed July 28, 2025, [https://tnodes.medium.com/setting-up-jest-with-react-and-phaser-422b174ec87e](https://tnodes.medium.com/setting-up-jest-with-react-and-phaser-422b174ec87e)  
50. How to run Jest tests with Phaser | by remarkablemark \- Medium, accessed July 28, 2025, [https://remarkablemark.medium.com/how-to-run-jest-tests-with-phaser-0ca05c8fa84b](https://remarkablemark.medium.com/how-to-run-jest-tests-with-phaser-0ca05c8fa84b)  
51. Unit testing a Phaser application? \- HTML5 Game Devs Forum, accessed July 28, 2025, [https://www.html5gamedevs.com/topic/3242-unit-testing-a-phaser-application/](https://www.html5gamedevs.com/topic/3242-unit-testing-a-phaser-application/)  
52. Deploying a Static Site \- Vite, accessed July 28, 2025, [https://vite.dev/guide/static-deploy](https://vite.dev/guide/static-deploy)  
53. I have tried everything to get pages to work with my Phaser game. · community · Discussion \#163780 \- GitHub, accessed July 28, 2025, [https://github.com/orgs/community/discussions/163780](https://github.com/orgs/community/discussions/163780)  
54. Free Game Assets (GUI, Sprite, Tilesets) \- itch.io, accessed July 28, 2025, [https://free-game-assets.itch.io/](https://free-game-assets.itch.io/)  
55. Free 2D Game Assets \- CraftPix.net, accessed July 28, 2025, [https://craftpix.net/freebies/](https://craftpix.net/freebies/)  
56. 2D Sprites \- CraftPix.net, accessed July 28, 2025, [https://craftpix.net/categorys/sprites/](https://craftpix.net/categorys/sprites/)  
57. Free Game Assets \- Game Art 2D, accessed July 28, 2025, [https://www.gameart2d.com/freebies.html](https://www.gameart2d.com/freebies.html)  
58. Free 2D Sprites by 2D Game Assets \- Dribbble, accessed July 28, 2025, [https://dribbble.com/craftpix\_net/collections/4481662-Free-2D-Sprites](https://dribbble.com/craftpix_net/collections/4481662-Free-2D-Sprites)  
59. Game Developer Sound Effects \- Zapsplat, accessed July 28, 2025, [https://www.zapsplat.com/sound-effect-category/game-sounds/](https://www.zapsplat.com/sound-effect-category/game-sounds/)  
60. Download Free Game Sound Effects | Mixkit, accessed July 28, 2025, [https://mixkit.co/free-sound-effects/game/](https://mixkit.co/free-sound-effects/game/)  
61. Royalty Free Sound Effects Archive: GameAudioGDC \- SONNISS, accessed July 28, 2025, [https://sonniss.com/gameaudiogdc/](https://sonniss.com/gameaudiogdc/)  
62. Best free Free Game sound effects generator \- ElevenLabs, accessed July 28, 2025, [https://elevenlabs.io/sound-effects/free-game](https://elevenlabs.io/sound-effects/free-game)