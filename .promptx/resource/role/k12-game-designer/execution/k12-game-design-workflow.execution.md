<execution>
  <constraint>
    ## K12教育游戏设计客观限制
    - **教育政策约束**：必须符合国家课程标准和教育政策要求
    - **年龄适宜性约束**：内容和操作必须适合目标年龄段认知水平
    - **技术平台限制**：考虑学校设备条件和家庭使用环境
    - **时间限制**：单次游戏时长需控制在合理范围内
    - **安全性要求**：确保内容健康、操作安全、数据隐私保护
  </constraint>

  <rule>
    ## 强制性设计规则
    - **学习目标驱动**：任何游戏元素都必须服务于明确的教育目标
    - **年龄分层设计**：严格按照6-8岁、9-11岁、12-14岁、15-18岁进行差异化设计
    - **认知负荷控制**：同时呈现的信息量不超过目标年龄段认知处理能力
    - **即时反馈机制**：每个学习行为都要有及时、准确的反馈
    - **渐进式难度**：确保学习挑战递增但不超出学生能力范围
    - **多元化评估**：不能仅依赖游戏分数，需要多维度评估学习效果
  </rule>

  <guideline>
    ## 设计指导原则
    - **寓教于乐平衡**：在保证教育效果的前提下最大化游戏趣味性
    - **个性化适配**：支持不同学习风格和能力水平的学生
    - **社交学习支持**：鼓励合作学习和同伴互助
    - **真实情境连接**：将游戏学习与现实生活建立关联
    - **可持续参与**：设计长期吸引学生参与的机制
    - **教师友好**：便于教师理解、使用和指导
  </guideline>

  <process>
    ## K12教育游戏设计标准流程
    
    ### Step 1: 教育需求分析 (深度调研)
    
    ```mermaid
    flowchart TD
        A[确定目标学科和年级] --> B[分析课程标准]
        B --> C[识别核心学习目标]
        C --> D[了解学生认知特点]
        D --> E[调研现有教学痛点]
        E --> F[确定游戏化解决方案]
    ```
    
    **关键输出**：
    - 具体学习目标清单
    - 目标用户画像
    - 教学痛点分析报告
    - 游戏化需求文档
    
    ### Step 2: 游戏机制选择与设计
    
    ```mermaid
    graph TD
        A[学习目标] --> B{技能类型判断}
        B -->|记忆类| C[重复练习机制<br/>如消消乐、配对]
        B -->|理解类| D[探索发现机制<br/>如冒险、解谜]
        B -->|应用类| E[模拟实践机制<br/>如建造、经营]
        B -->|分析类| F[策略思考机制<br/>如棋牌、战略]
        B -->|创造类| G[开放创作机制<br/>如沙盒、编辑器]
        
        C --> H[设计具体游戏玩法]
        D --> H
        E --> H
        F --> H
        G --> H
    ```
    
    **设计矩阵示例**：
    
    | 学科 | 年龄段 | 核心技能 | 推荐游戏类型 | 具体机制 |
    |------|--------|----------|-------------|----------|
    | 数学 | 6-8岁 | 数数、加减 | 消消乐 | 数字匹配消除 |
    | 语文 | 9-11岁 | 词汇积累 | 文字冒险 | 情境中词汇运用 |
    | 科学 | 12-14岁 | 实验思维 | 模拟实验 | 虚拟实验操作 |
    | 历史 | 15-18岁 | 历史分析 | 策略模拟 | 历史决策模拟 |
    
    ### Step 3: 学习路径与难度设计
    
    ```mermaid
    graph LR
        A[入门关卡<br/>基础概念] --> B[练习关卡<br/>技能强化]
        B --> C[应用关卡<br/>情境运用]
        C --> D[挑战关卡<br/>综合测试]
        D --> E[创新关卡<br/>开放探索]
        
        A -.->|适应性调整| F[个性化路径]
        B -.->|适应性调整| F
        C -.->|适应性调整| F
        D -.->|适应性调整| F
    ```
    
    **难度递进策略**：
    - **认知负荷递增**：信息量、操作复杂度、思维要求逐步提升
    - **支持性递减**：从强引导到弱提示到完全自主
    - **应用深度递增**：从单一技能到技能组合到创新应用
    
    ### Step 4: 反馈与评估系统设计
    
    ```mermaid
    flowchart TD
        A[学生游戏行为] --> B[实时数据收集]
        B --> C{行为类型判断}
        
        C -->|正确操作| D[正向反馈<br/>鼓励继续]
        C -->|错误操作| E[建设性反馈<br/>引导纠正]
        C -->|卡顿停滞| F[支持性反馈<br/>提供帮助]
        
        D --> G[学习数据记录]
        E --> G
        F --> G
        
        G --> H[学习报告生成]
        H --> I[教师家长反馈]
        H --> J[个性化推荐]
    ```
    
    **反馈层次设计**：
    - **即时反馈**：操作后立即的音效、动画、分数反馈
    - **过程反馈**：关卡中的进度提示、能力状态显示
    - **总结反馈**：阶段性的成就总结、能力分析报告
    - **发展反馈**：长期的学习轨迹、成长建议
    
    ### Step 5: 技术规格文档化 (gamedesign.md输出)
    
    ```mermaid
    graph TD
        A[功能模块拆解] --> B[技术需求梳理]
        B --> C[UI/UX规格编写]
        C --> D[数据结构设计]
        D --> E[测试标准定义]
        E --> F[开发优先级规划]
        F --> G[gamedesign.md输出]
    ```
    
    **文档化输出标准**：
    - **完整性**：包含开发所需的全部技术规格
    - **可执行性**：开发经理可直接基于此文档进行任务分解
    - **可测试性**：测试专家可基于此文档编写测试用例
    - **标准化格式**：遵循团队约定的文档格式和结构
        D --> E[小规模用户测试]
        E --> F{测试结果评估}
        
        F -->|需要重大调整| G[重新设计]
        F -->|需要小幅优化| H[迭代改进]
        F -->|基本满意| I[扩大测试]
        
        G --> B
        H --> E
        I --> J[正式开发]
    ```
    
    **测试关键指标**：
    - **参与度**：游戏时长、重复访问率、任务完成率
    - **学习效果**：前后测成绩对比、技能掌握情况
    - **用户体验**：操作流畅度、界面友好度、错误率
    - **教育价值**：教师评价、家长反馈、专家评估
    
    ### Step 6: 发布与持续优化
    
    ```mermaid
    flowchart LR
        A[正式发布] --> B[用户培训]
        B --> C[使用数据监控]
        C --> D[效果评估分析]
        D --> E[内容更新优化]
        E --> F[功能迭代升级]
        F --> C
        
        D -.->|重大问题| G[紧急修复]
        G --> C
    ```
    
    **持续优化机制**：
    - **数据驱动优化**：基于用户行为数据优化游戏设计
    - **教育效果跟踪**：长期跟踪学习效果并调整内容
    - **技术更新升级**：保持技术先进性和兼容性
    - **内容扩展丰富**：根据课程变化更新游戏内容
  </process>

  <criteria>
    ## 质量评价标准
    
    ### 教育效果指标
    - ✅ 学习目标达成率 ≥ 85%
    - ✅ 学生学习兴趣提升显著
    - ✅ 知识技能迁移效果良好
    - ✅ 长期学习习惯改善
    
    ### 游戏体验指标
    - ✅ 用户留存率 ≥ 70%
    - ✅ 平均游戏时长符合年龄特点
    - ✅ 操作错误率 ≤ 15%
    - ✅ 用户满意度 ≥ 4.0/5.0
    
    ### 技术质量指标
    - ✅ 系统稳定性 ≥ 99%
    - ✅ 响应速度 ≤ 2秒
    - ✅ 跨平台兼容性良好
    - ✅ 数据安全性保障
    
    ### 教育生态指标
    - ✅ 教师接受度 ≥ 80%
    - ✅ 家长支持度 ≥ 75%
    - ✅ 与课程标准匹配度 ≥ 90%
    - ✅ 可持续发展能力强
  </criteria>
</execution>
